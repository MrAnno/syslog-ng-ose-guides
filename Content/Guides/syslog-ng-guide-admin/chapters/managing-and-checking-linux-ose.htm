<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="" />
    </head>
    <body name="managing-and-checking-linux" oldrole="procedure">
        <h1 name="managing-and-checking-linux"><a name="managing-and-checking-linux"></a>Managing and checking syslog-ng service on Linux</h1>
        
        <p oldrole="para">
            <p>This section describes how to start, stop and check the status of syslog-ng service on Linux.</p>
        </p>
        <div>
            <h6 oldrole="formalpara">Starting syslog-ng</h6>
            <p class="procedure">To start syslog-ng, execute the following command as root.</p>
            <div class="Example">
                <h6 name="example-serverconfig" oldrole="example">Example: a simple configuration for servers</h6>
                <p><b><span class="Code">systemctl start syslog-ng</span></b>
                </p>
            </div>
            <p>If the service starts successfully, no output will be displayed.</p>
            <p>The following message indicates that syslog-ng can not start (see <MadCap:xref href="#check-syslog-ng-status"><span style="color: #04aada;" class="mcFormatColor">Checking syslog-ng status</span></MadCap:xref>):</p>
            <p><span class="Code">Job for syslog-ng.service failed because the control process exited with error code. See <b>systemctl status syslog-ng.service</b> and <b>journalctl -xe</b> for details.</span></p>
            <h6 oldrole="formalpara">Stopping syslog-ng</h6>
            <p class="procedure">To stop syslog-ng</p>
            <ol>
                <li>Execute the following command as root.			<div class="Example"><h6 name="example-serverconfig" oldrole="example">Example: command for stopping syslog-ng</h6><p><b><span class="Code">systemctl stop syslog-ng</span></b></p></div></li>
                <li>
                    <p>Check the status of syslog-ng service (see <MadCap:xref href="#check-syslog-ng-status"><span style="color: #04aada;" class="mcFormatColor">Checking syslog-ng status</span></MadCap:xref>).</p>
                </li>
            </ol>
            <h6 oldrole="formalpara">Restarting syslog-ng</h6>
            <p class="procedure">To restart syslog-ng, execute the following command as root.</p>
            <div class="Example">
                <h6 name="example-serverconfig" oldrole="example">Example: command for restarting syslog-ng</h6>
                <p><b><span class="Code">systemctl restart syslog-ng</span></b>
                </p>
            </div>
            <h6>Reloading configuration file without restarting syslog-ng</h6>
            <p class="procedure">To reload the configuration file without restarting syslog-ng, execute the following command as root.</p>
            <div class="Example">
                <h6 name="example-serverconfig" oldrole="example">Example: command for reloading the configuration file without restarting syslog-ng</h6>
                <p><b><span class="Code">systemctl reload syslog-ng</span></b>
                </p>
            </div>
            <h6 oldrole="formalpara"><a name="check-syslog-ng-status"></a>Checking syslog-ng status</h6>
            <p oldrole="formalpara">To check the following status-related components, observe the suggestions below.</p>
            <ul>
                <li>
                    <p><b>Checking the status of syslog-ng service</b>
                    </p>
                    <p class="procedure">To check the status of syslog-ng service</p>
                    <ol>
                        <li>
                            <p>Execute the following command as root.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: command for checking the status of syslog-ng service</h6>
                                <p><b><span class="Code">systemctl --no-pager status syslog-ng</span></b>
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>Check the <span class="code">Active:</span> field, which shows the status of syslog-ng service. The following statuses are possible:</p>
                            <ul>
                                <li>
                                    <p>
                                        <p><b>active (running)</b> - syslog-ng service is up and running</p>
                                    </p>
                                    <div class="Example">
                                        <h6 name="example-serverconfig" oldrole="example">Example: syslog-ng service active</h6>
                                        <p><span class="Code"><p>syslog-ng.service - System Logger Daemon</p><p>Loaded: loaded (/lib/systemd/system/syslog-ng.service; enabled; vendor preset: enabled)</p><p>Active: <b>active (running)</b> since Tue 2019-06-25 08:58:09 CEST; 5s ago</p><p>Main PID: 6575 (syslog-ng)</p><p>Tasks: 3</p><p>Memory: 13.3M</p><p>CPU: 268ms</p><p>CGroup: /system.slice/syslog-ng.service</p><p>6575 /opt/syslog-ng/libexec/syslog-ng -F --no-caps --enable-core</p></span>
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        <p><b>inactive (dead)</b> - syslog-ng service is stopped</p>
                                    </p>
                                    <div class="Example">
                                        <h6 name="example-serverconfig" oldrole="example">Example: syslog-ng status inactive</h6>
                                        <p><span class="Code"><p>syslog-ng.service - System Logger Daemon</p><p>Loaded: loaded (/lib/systemd/system/syslog-ng.service; enabled; vendor preset: enabled)</p><p>Active: <b>inactive (dead)</b> since Tue 2019-06-25 09:14:16 CEST; 2min 18s ago</p><p>Process: 6575 ExecStart=/opt/syslog-ng/sbin/syslog-ng -F --no-caps --enable-core $SYSLOGNG_OPTIONS (code=exited, status=0/SUCCESS)</p><p>Main PID: 6575 (code=exited, status=0/SUCCESS)</p><p>Status: "Shutting down... Tue Jun 25 09:14:16 2019"</p><p>Jun 25 09:14:31 as-syslog-srv systemd: Stopped System Logger Daemon.</p></span>
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ol>
                </li>
                <li>
                    <p><b>Checking the process of syslog-ng</b>
                    </p>
                    <p class="procedure">To check the process of syslog-ng, execute one of the following commands.</p>
                    <ul>
                        <li>
                            <p>
                                <div class="Example">
                                    <h6 name="example-serverconfig" oldrole="example">Example: command <span class="Code">ps u `pidof syslog-ng`</span></h6>
                                    <p><b><span class="Code">ps u `pidof syslog-ng`</span></b>
                                    </p>
                                </div>
                            </p>
                            <p>Expected output example:</p>
                            <p><span class="code"><p>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</p><p>syslogng  6709  0.0  0.6 308680 13432 ?        Ss   09:17   0:00 /opt/syslog-ng/libexec/syslog-ng -F --no-caps --enable-core</p></span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <div class="Example">
                                    <h6 name="example-serverconfig" oldrole="example">Example: command <span class="Code">ps axu | grep syslog-ng | grep -v grep</span></h6>
                                    <p><b><span class="Code">ps axu | grep syslog-ng | grep -v grep</span></b>
                                    </p>
                                </div>
                            </p>
                            <p>Expected output example:</p>
                            <p><span class="code">syslogng  6709  0.0  0.6 308680 13432 ?        Ss   09:17   0:00 /opt/syslog-ng/libexec/syslog-ng -F --no-caps --enable-core</span>
                            </p>
                        </li>
                    </ul>
                </li>
                <li>
                    <p><b>Checking the internal logs of syslog-ng</b>
                    </p>
                    <p>
                        <p>The internal logs of syslog-ng contains informal, warning and error messages.</p>
                    </p>
                    <p>
                        <p>By default, syslog-ng log messages (generated on the <span class="code">internal()</span> source) are written to <b>/var/log/messages</b>.</p>
                    </p>
                    <p>
                        <p>Check the internal logs of syslog-ng for any issue.</p>
                    </p>
                </li>
                <li>
                    <p>
                        <p><b>Message processing</b>
                        </p>
                    </p>
                    <p>
                        <p>The syslog-ng application collects statistics about the number of processed messages on the different sources and destinations.</p>
                    </p>
                    <ul>
                        <li>
                            <p><b>Central statistics</b>
                            </p>
                            <p class="procedure">To check the central statistics, execute the following command to see the number of received and queued (sent) messages by syslog-ng.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: command for checking central statistics</h6>
                                <p><b><span class="Code">watch "/opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^center"</span></b>
                                </p>
                            </div>
                            <p>The output will be updated in every 2 seconds.</p>
                            <p>If the numbers are changing, syslog-ng is processing the messages.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: output example </h6>
                                <p><b><span class="Code">Every 2.0s: /opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^center       Tue Jun 25 10:33:25 2019

											center;;queued;a;processed;112
									center;;received;a;processed;28</span></b>
                                </p>
                            </div>
                        </li>
                        <li>
                            <p><b>Source statistics</b>
                            </p>
                            <p class="procedure">To check the source statistics, execute the following command to see the number of received messages on the configured sources.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: command for checking central statistics</h6>
                                <p><b><span class="Code">watch "/opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^source"</span></b>
                                </p>
                            </div>
                            <p>The output will be updated in every 2 seconds.</p>
                            <p>If the numbers are changing, syslog-ng is receiving messages on the sources.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: output example </h6>
                                <p><b><span class="Code"><p>Every 2.0s: /opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^source      Tue Jun 25 10:40:50 2019</p><p>source;s_null;;a;processed;0</p><p>source;s_net;;a;processed;0</p><p>source;s_local;;a;processed;90</p></span></b>
                                </p>
                            </div>
                        </li>
                        <li>
                            <p><b>Destination statistics</b>
                            </p>
                            <p class="procedure">To check the source statistics, execute the following command to see the number of received messages on the configured sources.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: command for checking destination statistics</h6>
                                <p><b><span class="Code">watch "/opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^source"</span></b>
                                </p>
                            </div>
                            <p>The output will be updated in every 2 seconds.</p>
                            <p>If the numbers are changing, syslog-ng is receiving messages on the sources.</p>
                            <div class="Example">
                                <h6 name="example-serverconfig" oldrole="example">Example: output example </h6>
                                <p><b><span class="Code"><p>Every 2.0s: /opt/syslog-ng/sbin/syslog-ng-ctl stats | grep ^destination      Tue Jun 25 10:41:02 2019</p><p>destination;d_logserver2;;a;processed;90</p><p>destination;d_messages;;a;processed;180</p><p>destination;d_logserver;;a;processed;90</p><p>destination;d_null;;a;processed;0</p></span></b>
                                </p>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
            <p>
                <table cellspacing="0" class="TableStyle-NoteTable_Blue_DoNotEdit" oldrole="note" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css');">
                    <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column1" style="width: 0.3in;">
                    </col>
                    <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column2">
                    </col>
                    <tbody>
                        <tr class="TableStyle-NoteTable_Blue_DoNotEdit-Body-Body1">
                            <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyB-Column1-Body1">
                                <p>
                                    <img src="../../../Resources/Images/Common/note.png" />
                                </p>
                            </td>
                            <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyA-Column2-Body1"><span class="AllNoteStyles">NOTE: </span>
                                <p>If you find error messages in the internal logs, messages are not processed by syslog-ng or you encounter any issue, you have the following options:<p><p><ul><li>Search for the error or issue in our <a href="https://support.oneidentity.com/syslog-ng-premium-edition/kb">knowledge base</a>.</li><li>Check the <a href="https://support.oneidentity.com/syslog-ng-premium-edition/kb?k=troubleshooting&amp;r=Topic%3ATroubleshooting">following knowledge base articles</a> for further troubleshooting.</li><li><a href="https://support.oneidentity.com/">Open a support service request</a> including the results.</li></ul></p></p></p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </p>
        </div>
    </body>
</html>