<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta name="description" content="" />
    </head>
    <body name="configuring-destinations-kafka-c" oldrole="section">
        <h1 name="configuring-destinations-kafka-c"><a name="configuring-destinations-kafka-c"></a><span class="Code" oldrole="parameter">kafka</span>: Publishing messages to Apache Kafka (C implementation)</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;kafka&lt;/span&gt;]">
        </MadCap:keyword>
        <p oldrole="para">Starting with version <MadCap:conditionaltext MadCap:conditions="General.pe">5.4</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.ose">3.21</MadCap:conditionaltext>, <MadCap:variable name="General.abbrev"></MadCap:variable> can directly publish log messages to the <a href="http://kafka.apache.org">Apache Kafka</a> message bus, where subscribers can access them.</p>
        <p>As of <MadCap:variable name="General.abbrev" /> version <MadCap:conditionaltext MadCap:conditions="General.ose">3.21</MadCap:conditionaltext>, the new C implementation of the <span class="Code" oldrole="parameter">kafka</span> destination is available. The options of this implementation are compatible with those of the old Java implementation.</p>
        <p>The new C implementation has the following advantages in comparison with the Java implementation:</p>
        <ul>
            <li>scalability</li>
            <li>simpler setup</li>
            <li>more efficient memory usage</li>
            <li>smaller resource requirements</li>
            <!--FIXTHIS-->
            <li>disk-based nature</li>
            <li>supports more formats (for example, the arrow format)</li>
            <li>the new config() may be aliased as option(...)</li>
        </ul>
        <p oldrole="para">For the list of options, see <MadCap:xref href="reference-destination-kafka-c.htm"><span style="color: #04aada;" class="mcFormatColor">Options of the kafka destination's C implementation</span></MadCap:xref>.</p>
        <h6><a name="how-it-works"></a>How the C implementation of the <span class="userinput">kafka</span> destination works with <MadCap:variable name="General.abbrev" /></h6>
        <p>
            <!--FIXME-intro szöveg-->
        </p>
        <p>
            <img src="../../Resources/Images_Notlocalized/syslog-ng-ose-guide-admin/kafka-c-implementation.png" style="width: 538px;height: 331px;" />
            <p>
            </p>
            <div>
                <h6 oldrole="formalpara">Declaration:</h6><pre class="Code" oldrole="synopsis" xml:space="preserve">
@define kafka-implementation kafka-c

kafka(
    bootstrap-servers("1.2.3.4:9092,192.168.0.2:9092")
    topic("{MYTOPIC}")

);</pre>
            </div>
            <!--FIXTHIS-->
            <div class="Example">
                <h6 name="example-destination-kafka" oldrole="example"><a name="example-destination-kafka"></a>Example: Sending log data to Apache Kafka</h6>
                <p oldrole="para">The following example defines a <span class="Code" oldrole="parameter">kafka</span> destination in the new C implementation, using only the required parameters.</p><pre class="Code" oldrole="synopsis" xml:space="preserve">

@define kafka-implementation kafka-c 
@include "scl.conf"

destination d_kafka {
  kafka(
    bootstrap-servers("1.2.3.4:9092,192.168.0.2:9092")
    topic("{MYTOPIC}")
  );
};</pre>
            </div><![CDATA[
		]]></p>
        <ul oldrole="itemizedlist">
            <li oldrole="listitem">
                <p oldrole="para">To install the software required for the <span class="Code" oldrole="parameter">kafka</span> destination, see <MadCap:xref href="#prereq"><span style="color: #04aada;" class="mcFormatColor">Prerequisites and restrictions</span></MadCap:xref>.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">For details on how the new C implementation of the <span class="Code" oldrole="parameter">kafka</span> destination works with syslog-ng, see <MadCap:xref href="#how-it-works"><span style="color: #04aada;" class="mcFormatColor">How the C implementation of the <span class="Code" oldrole="parameter">kafka</span> destination works with [%=General.abbrev%]</span></MadCap:xref>.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">For the list of options, see <MadCap:xref href="reference-destination-kafka-c.htm"><span style="color: #04aada;" class="mcFormatColor">Options of the <span class="Code" oldrole="parameter">kafka</span> destination's C implementation</span></MadCap:xref>.</p>
            </li>
            <li>
                <p>If you used the Java implementation before, see <MadCap:xref href="destination-kafka-c-from-java.htm" class="HeadingOnPage"><span style="color: #04aada;" class="mcFormatColor">Shifting from Java implementation to C implementation</span></MadCap:xref>.</p>
            </li>
        </ul>
        <!--FIXTHIS-->
        <h6><a name="prereq"></a>Prerequisites and restrictions</h6>
        <p>
            <ul oldrole="itemizedlist">
                <MadCap:snippetBlock src="../../shared/chunk/listitem-java-supported-platforms.htm">
                </MadCap:snippetBlock>
                <li oldrole="listitem">
                    <p oldrole="para">Since the new C implementation uses the <a href="https://docs.confluent.io/2.0.0/clients/librdkafka/index.html">librdkafka client library</a>, the <span class="Code" oldrole="parameter">kafka</span> destination has less memory usage than the previous Java implementation (which uses the official Java Kafka producer).</p>
                </li>
                <MadCap:snippetBlock src="../../shared/chunk/listitem-java-internal-messages.htm">
                </MadCap:snippetBlock>
                <li>If you used the Java implementation before, see <MadCap:xref href="destination-kafka-c-from-java.htm" class="HeadingOnPage"><span style="color: #04aada;" class="mcFormatColor">Shifting from Java implementation to C implementation</span></MadCap:xref>.</li>
                <li>
                    <p oldrole="para">The <MadCap:variable name="General.abbrev" /> <span class="Code" oldrole="parameter">kafka</span> destination supports all properties of the official Kafka producer. For details, see <a href="https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md">the librdkafka documentation</a>.</p>
                </li>
            </ul>
        </p>
    </body>
</html>