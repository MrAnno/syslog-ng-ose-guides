<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="General.ose">
    <head>
        <meta name="description" content="" />
    </head>
    <body condition="ose" name="configuring-destinations-amqp" oldrole="section">
        <h1 condition="ose" name="configuring-destinations-amqp"><span class="Code" oldrole="parameter">amqp</span>: Publishing messages using AMQP</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;amqp()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <p oldrole="para">The <span class="Code" oldrole="parameter">amqp()</span> driver publishes messages using the <a href="http://www.amqp.org/">AMQP (Advanced Message Queuing Protocol)</a>. <MadCap:variable name="General.abbrev"></MadCap:variable> supports AMQP versions 0.9.1 and 1.0. The <MadCap:variable name="General.abbrev"></MadCap:variable> <span class="Code" oldrole="parameter">amqp()</span> driver supports persistence, and every available exchange types.</p>
        <p oldrole="para">The name-value pairs selected with the <span class="Code" oldrole="parameter">value-pairs()</span> option will be sent as AMQP headers, while the body of the AMQP message is empty by default (but you can add custom content using the <span class="Code" oldrole="parameter">body()</span> option). Publishing the name-value pairs as headers makes it possible to use the Headers exchange-type and subscribe only to interesting log streams. This solution is more flexible than using the <span class="Code" oldrole="parameter">routing-key()</span> option.</p>
        <p oldrole="para">For the list of available parameters, see <MadCap:xref href="reference-destination-amqp.htm#reference-destination-amqp"><span style="color: #04aada;" class="mcFormatColor">amqp() destination options</span></MadCap:xref>.</p>
        <h6 oldrole="formalpara">Declaration:</h6><pre class="Code" oldrole="synopsis">amqp( host("&lt;amqp-server-address&gt;") );</pre>
        <div class="Example">
            <h6 name="example-using-amqp" oldrole="example"><a name="example-using-amqp"></a>Example: Using the amqp() driver</h6>
            <p oldrole="para">The following example shows the default values of the available options.</p><pre class="Code" oldrole="synopsis">destination d_amqp {
    amqp(
        vhost("/")
        host("127.0.0.1")
        port(5672)
        exchange("syslog")
        exchange-type("fanout")
        routing-key("")
        body("")
        persistent(yes)
        value-pairs(
            scope("selected-macros" "nv-pairs" "sdata")
        )
    );
};</pre>
        </div>
    </body>
</html>