<?xml version="1.0" encoding="UTF-8"?>
%entities;]&gt;
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
 <body name="configuring-source-nodejs" oldrole="section">
  <h1 name="configuring-source-nodejs" oldrole="section">
   <span class="Code" oldrole="parameter">
    nodejs
   </span>
   : Receiving JSON messages from nodejs applications
  </h1>
  <MadCap:keyword term="source drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;nodejs()&lt;/span&gt;, ' driver']">
  </MadCap:keyword>
  <p oldrole="para">
   Using the
   <span class="Code" oldrole="parameter">
    nodejs()
   </span>
   driver,
   <MadCap:variable name="General.abbrev">
    abbrev
   </MadCap:variable>
   can receive application logs directly from nodejs applications that use the widespread
   <a href="https://github.com/winstonjs/winston">
    Winston
   </a>
   logging API. The
   <entity>
    abbrev
   </entity>
   application automatically adds the
   <span class="Code" oldrole="parameter">
    .nodejs.winston.
   </span>
   prefix to the name of the fields the extracted from the message.
  </p>
  <p oldrole="para">
   To use the
   <span class="Code" oldrole="parameter">
    nodejs()
   </span>
   driver, the
   <span class="Code" oldrole="filename">
    scl.conf
   </span>
   file must be included in your
   <entity>
    abbrev
   </entity>
   configuration:
  </p>
  <p class="Code" oldrole="synopsis">
   @include "scl.conf"
  </p>
  <p oldrole="para">
   The
   <span class="Code" oldrole="parameter">
    nodejs()
   </span>
   driver is actually a reusable configuration snippet configured to receive log messages using the
   <span class="Code" oldrole="parameter">
    network()
   </span>
   driver, and process its JSON contents. For details on using or writing such configuration snippets, see
   <xref linkend="config-blocks">
   </xref>
   . You can find the source of the nodejs configuration snippet on
   <a href="https://github.com/balabit/syslog-ng/blob/master/scl/nodejs/plugin.conf">
    GitHub
   </a>
   .
  </p>
  <example xml:id="example-source-nodejs">
   <title>
    Using the nodejs() driver
   </title>
   <p oldrole="para">
    The following example uses the default settings of the driver, listening for messages on port 9003 of every IP address of the
    <entity>
     abbrev
    </entity>
    host.
   </p>
   <p class="Code" oldrole="synopsis">
    @include "scl.conf"
source apps { nodejs(); };
   </p>
   <p oldrole="para">
    The following example listens only on IP address
    <span class="Code" oldrole="userinput">
     192.168.1.1
    </span>
    , port
    <span class="Code" oldrole="userinput">
     9999
    </span>
    .
   </p>
   <p class="Code" oldrole="synopsis">
    @include "scl.conf"
source apps { nodejs(
            localip(192.168.1.1)
            port(9999)
            )
};
   </p>
  </example>
  <table cellspacing="0" class="TableStyle-NoteTable_Blue_DoNotEdit" oldrole="note" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css');">
   <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column1" style="width: 0.3in;">
   </col>
   <col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column2">
   </col>
   <tbody>
    <tr class="TableStyle-NoteTable_Blue_DoNotEdit-Body-Body1">
     <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyB-Column1-Body1">
      <p>
       <img src="../../Resources/Images/Common/note.png"/>
      </p>
     </td>
     <td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyA-Column2-Body1">
      <span class="AllNoteStyles">
       NOTE:
      </span>
      <p oldrole="para">
       For details on the parameters of the
       <span class="Code" oldrole="parameter">
        nodejs()
       </span>
       driver, see
       <xref linkend="reference-source-nodejs">
       </xref>
       .
      </p>
     </td>
    </tr>
   </tbody>
  </table>
  <h2 name="reference-source-nodejs">
   nodejs() source options
  </h2>
  <indexterm>
   <primary>
    source drivers
   </primary>
   <secondary>
    <span class="Code" oldrole="parameter">
     nodejs()
    </span>
    driver
   </secondary>
  </indexterm>
  <indexterm>
   <primary>
    Winston API
   </primary>
  </indexterm>
  <p oldrole="para">
   The
   <span class="Code" oldrole="parameter">
    nodejs()
   </span>
   driver has the following options.
  </p>
  <simplesect>
   <MadCap:snippetBlock src="../../shared/chunk/option-source-ip.htm">
   </MadCap:snippetBlock>
  </simplesect>
  <simplesect>
   <title>
    port() or localport()
   </title>
   <indexterm type="parameter">
    <primary>
     port() or localport()
    </primary>
   </indexterm>
   <informaltable colsep="0" frame="topbot" rowsep="0">
    <tgroup cols="2">
     <colspec colnum="1" colwidth="40pt">
     </colspec>
     <tbody>
      <row>
       <entry>
        Type:
       </entry>
       <entry>
        number
       </entry>
      </row>
      <row>
       <entry>
        Default:
       </entry>
       <entry>
        9003
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
   <p oldrole="para">
    <i oldrole="emphasis" role="bold">
     Description:
    </i>
    The port number to bind to.
   </p>
  </simplesect>
 </body>
</html>
