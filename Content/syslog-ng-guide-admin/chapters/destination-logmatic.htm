<?xml version="1.0" encoding="UTF-8"?>
%entities;]&gt;
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
 <body name="configuring-destinations-logmatic" oldrole="section">
  <h1 name="configuring-destinations-logmatic" oldrole="section">
   <span class="Code" oldrole="parameter">
    logmatic
   </span>
   : Using Logmatic.io
  </h1>
  <MadCap:keyword term="destination drivers:['logmatic()']">
  </MadCap:keyword>
  <p oldrole="para">
   The
   <span class="Code" oldrole="parameter">
    logmatic()
   </span>
   destination sends log messages to the
   <a href="https://logmatic.io/">
    Logmatic.io
   </a>
   Logging-as-a-Service provider. You can send log messages over TCP, or encrypted with TLS.
  </p>
  <p>
   <b oldrole="formalpara">
    Declaration:
   </b>
  </p>
  <p oldrole="para">
  </p>
  <p class="Code" oldrole="synopsis">
   logmatic(token());
  </p>
  <example xml:id="example-destination-logmatic">
   <title>
    Using the logmatic() driver
   </title>
   <p oldrole="para">
    To use the logmatic() destination, the only mandatory parameter is your user token. The following example sends every log from the
    <span class="Code" oldrole="parameter">
     system()
    </span>
    source to your Logmatic.io account.
   </p>
   <p class="Code" oldrole="synopsis">
    log {
    source { system(); };
    destination { logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;")); };
};
   </p>
   <p oldrole="para">
    The following example uses TLS encryption. Before using it, download the CA certificate of Logmatic.io and copy it to your hosts (for example, into the
    <span class="Code" oldrole="filename">
     /etc/ssl/certs/
    </span>
    directory.
   </p>
   <p class="Code" oldrole="synopsis">
    log {
    destination {
        logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;") port(6514)
            tls(peer-verify(required-trusted) ca-dir('/etc/ssl/certs'))
        );
    };
};
   </p>
   <p oldrole="para">
    The following example parses the access logs of an Apache webserver from a file and sends them to Logmatic.io in JSON format.
   </p>
   <p class="Code" oldrole="synopsis">
    log {
    source { file("/var/log/apache2/access.log" flags(no-parse)); };
    parser { apache-accesslog-parser(); };
    destination {
        logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;")
           tag(apache)
           template("$(format-json .apache.* timestamp=${ISODATE})"));
    };
}
   </p>
  </example>
  <p oldrole="para">
   To use the
   <span class="Code" oldrole="parameter">
    logmatic()
   </span>
   driver, the
   <span class="Code" oldrole="filename">
    scl.conf
   </span>
   file must be included in your
   <entity>
    abbrev
   </entity>
   configuration:
  </p>
  <p class="Code" oldrole="synopsis">
   @include "scl.conf"
  </p>
  <p oldrole="para">
   The
   <span class="Code" oldrole="parameter">
    logmatic()
   </span>
   driver is actually a reusable configuration snippet configured to send log messages using the
   <span class="Code" oldrole="parameter">
    tcp()
   </span>
   driver using a template. For details on using or writing such configuration snippets, see
   <xref linkend="config-blocks">
   </xref>
   . You can find the source of this configuration snippet on
   <a href="https://github.com/balabit/syslog-ng/blob/master/scl/logmatic/logmatic.conf">
    GitHub
   </a>
   .
  </p>
  <h2 name="reference-destination-logmatic">
   logmatic() destination options
  </h2>
  <indexterm>
   <primary>
    destination drivers
   </primary>
   <secondary>
    <span class="Code" oldrole="parameter">
     logmatic()
    </span>
    driver
   </secondary>
  </indexterm>
  <p oldrole="para">
   The
   <span class="Code" oldrole="parameter">
    logmatic()
   </span>
   destination has the following options. You can also set other options of the underlying
   <span class="Code" oldrole="parameter">
    tcp()
   </span>
   driver (for example, port number or TLS-encryption).
  </p>
  <simplesect xml:id="logmatic-option-token">
   <title>
    token()
   </title>
   <indexterm type="parameter">
    <primary>
     token()
    </primary>
   </indexterm>
   <informaltable colsep="0" frame="topbot" rowsep="0">
    <tgroup cols="2">
     <colspec colnum="1" colwidth="40pt">
     </colspec>
     <tbody>
      <row>
       <entry>
        Type:
       </entry>
       <entry>
        string
       </entry>
      </row>
      <row>
       <entry>
        Default:
       </entry>
       <entry>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
   <p oldrole="para">
    <i oldrole="emphasis" role="bold">
     Description:
    </i>
    Your API Key that you received from Logmatic.io.
   </p>
  </simplesect>
 </body>
</html>
