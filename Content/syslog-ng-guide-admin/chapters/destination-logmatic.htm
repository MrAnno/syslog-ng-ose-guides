<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="5" MadCap:lastHeight="1448" MadCap:lastWidth="616">
    <head>
        <link href="../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body name="configuring-destinations-logmatic" oldrole="section">
        <h1 name="configuring-destinations-logmatic" version="5.0" xmlns="http://docbook.org/ns/docbook"><span class="Code" oldrole="parameter">logmatic</span>: Using Logmatic.io</h1>
        <MadCap:keyword term="destination drivers:['logmatic()']">
        </MadCap:keyword>
        <p oldrole="para">The <span class="Code" oldrole="parameter">logmatic()</span> destination sends log messages to the <a href="https://logmatic.io/">Logmatic.io</a> Logging-as-a-Service provider. You can send log messages over TCP, or encrypted with TLS.</p>
        <h6 oldrole="formalpara">Declaration:</h6><pre class="Code" oldrole="synopsis">logmatic(token());</pre>
        <h6 name="example-destination-logmatic" oldrole="example">Example: Using the logmatic() driver</h6>
        <p oldrole="para">To use the logmatic() destination, the only mandatory parameter is your user token. The following example sends every log from the <span class="Code" oldrole="parameter">system()</span> source to your Logmatic.io account.</p><pre class="Code" oldrole="synopsis">log {
    source { system(); };
    destination { logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;")); };
};</pre>
        <p oldrole="para">The following example uses TLS encryption. Before using it, download the CA certificate of Logmatic.io and copy it to your hosts (for example, into the <span class="Code" oldrole="filename">/etc/ssl/certs/</span> directory.</p><pre class="Code" oldrole="synopsis">log {
    destination {
        logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;") port(6514)
            tls(peer-verify(required-trusted) ca-dir('/etc/ssl/certs'))
        );
    };
};</pre>
        <p oldrole="para">The following example parses the access logs of an Apache webserver from a file and sends them to Logmatic.io in JSON format.</p><pre class="Code" oldrole="synopsis">log {
    source { file("/var/log/apache2/access.log" flags(no-parse)); };
    parser { apache-accesslog-parser(); };
    destination {
        logmatic(token("&lt;API-KEY-AS-PROVIDED-BY-LOGMATIC.IO&gt;")
           tag(apache)
           template("$(format-json .apache.* timestamp=${ISODATE})"));
    };
}</pre>
        <p oldrole="para">To use the <span class="Code" oldrole="parameter">logmatic()</span> driver, the <span class="Code" oldrole="filename">scl.conf</span> file must be included in your <MadCap:variable name="General.abbrev"></MadCap:variable> configuration:</p><pre class="Code" oldrole="synopsis">@include "scl.conf"</pre>
        <p oldrole="para">The <span class="Code" oldrole="parameter">logmatic()</span> driver is actually a reusable configuration snippet configured to send log messages using the <span class="Code" oldrole="parameter">tcp()</span> driver using a template. For details on using or writing such configuration snippets, see <MadCap:xref href="chapter-configuration-file.htm#config-blocks"></MadCap:xref>. You can find the source of this configuration snippet on <a href="https://github.com/balabit/syslog-ng/blob/master/scl/logmatic/logmatic.conf">GitHub</a>.</p>
        <h2 name="reference-destination-logmatic">logmatic() destination options</h2>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;logmatic()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <p oldrole="para">The <span class="Code" oldrole="parameter">logmatic()</span> destination has the following options. You can also set other options of the underlying <span class="Code" oldrole="parameter">tcp()</span> driver (for example, port number or TLS-encryption).</p>
        <h6 name="logmatic-option-token" oldrole="simplesect">token()</h6>
        <MadCap:keyword term="token()">
        </MadCap:keyword>
        <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
            <tbody>
                <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                    <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                    <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                </tr>
                <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                    <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                    <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">
                    </td>
                </tr>
            </tbody>
            <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
            </col>
        </table>
        <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> Your API Key that you received from Logmatic.io.</p>
    </body>
</html>